---
layout: none
sitemap: false
---

{%- comment -%} Create a prioritized language list {%- endcomment -%}
{%- assign default_lang = site.default_lang | default: site.languages.first -%}
{%- assign sorted_langs = site.languages -%}
{%- if default_lang -%}
  {%- assign sorted_langs = sorted_langs | unshift: default_lang | uniq -%}
{%- endif -%}



<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml">

{%- assign pagesAndPosts = site.pages | concat: site.posts -%}

{%- for node in pagesAndPosts -%}
  {%- comment -%} Filter stuff that should not be in the sitemap {%- endcomment -%}
  {%- unless node.sitemap == false or node.url contains '/robots.txt' or node.url contains '/redirects.json' or node.url contains '/assets/' or node.url contains '/404' -%}

    {%- comment -%} Get the URL to be used for x-default based on the prioritized language list {%- endcomment -%}
    {%- assign xDefaultUrl = "" -%}
    {%- for languageCode in sorted_langs -%}
      {%- if node.permalink_lang[languageCode] -%}
        {%- if xDefaultUrl == "" -%}
          {%- if languageCode == default_lang -%}
            {%- assign xDefaultUrl = node.permalink_lang[languageCode] | absolute_url -%}
          {%- else -%}
            {%- assign languagePrefix = "/" | append: languageCode | append: node.permalink_lang[languageCode] | absolute_url -%}
          {%- endif -%}
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}


    {%- comment -%} Create a url entry for each language specific permalink of the node {%- endcomment -%}
    {%- for languageCode in sorted_langs -%}
      {%- if languageCode == default_lang -%}
        {%- assign languagePrefix = "" -%}
      {%- else -%}
        {%- assign languagePrefix = "/" | append: languageCode -%}
      {%- endif -%}

      {%- if node.permalink_lang[languageCode] %}
  <url>
    <loc>{{ languagePrefix | append: node.permalink_lang[languageCode] | absolute_url }}</loc>
    <lastmod>{{ node.last_modified_at | default: node.date | default: site.time | date_to_xmlschema }}</lastmod>

        {%- if xDefaultUrl != "" %}
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ xDefaultUrl }}" />
        {%- endif -%}

        {%- for languageCode in sorted_langs -%}
          {%- if node.permalink_lang[languageCode] -%}
            {%- if languageCode == default_lang -%}
              {%- assign languagePrefix = "" -%}
            {%- else -%}
              {%- assign languagePrefix = "/" | append: languageCode -%}
            {%- endif %}
    <xhtml:link rel="alternate" hreflang="{{ languageCode }}" href="{{ languagePrefix | append: node.permalink_lang[languageCode] | absolute_url }}" />
          {%- endif -%}
        {%- endfor %}
  </url>
      {%- endif -%}
    {%- endfor -%}
  {%- endunless -%}
{%- endfor %}
</urlset>